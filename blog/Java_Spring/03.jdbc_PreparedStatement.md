# [Java] Jdbc 1편. Jdbc와 PreparedStatement



Java-Spring 기반으로 작업을하다보면, Db 연결 시에 주로 Prepared Statement, Mybatis, Jpa 이 셋 중에 하나를 골라서 사용하게 된다. 돌아가면서 사용하다보니 기본적인 설정과 동작법들을 매번 까먹고 다시 찾아보게 되는데, 이번 기회에 내용을 정리해 보고자 한다.



## Jdbc란



JDBC(Java Database Connectivity )는 자바에서 DBMS에 접근할 수 있도록 해주는 표준 API이다. Java 8 이상을 사용한다면, 기본적으로 Java를 설치했을 때 같이 설치되며, 다음 두 개의 패키지로 구성되어 있다. 

- java.sql
- javax.sql

JDBC는 Interface와 Class들로 이루어져 있는데, 이 JDBC API만을 가지고 DBMS에 접근할 수 있는 것은 아니다. 특정 DBMS에 작업하기 위해서는 해당 DBMS로 접근할 수 있는 JDBC 기반의 driver를 사용해야 한다. 다시 말해, JDBC는 JDBC Driver가 수행해야 할 역할만을 명시하는 Interface이며, 실제 작업에 대한 구현은 별도 Driver를 통해서 가능하다.



## Driver Import

특정 DBMS에 접근하기 위해서는 해당 Driver로 접근할 수 있는 Driver를 Java 프로그램에서 사용할 수 있게 해줘야 한다. 방법으로는 두가지가 있다.

1.. 첫번째로 Maven, Gradle 같이 빌드 도구를 사용한 프로젝트라면 의존성(depency)을 추가하여 설정할 수 있다. Maven 프로젝트를 예시로 들자면, pom.xml에 다음과 같이 의존성을 추가함으로 프로젝트 내에서 Hikari라는 driver을 사용할 수 있게 된다.

```xml
<dependencies>
    // ... 
    <dependency>
        <groupId>com.zaxxer</groupId>
        <artifactId>HikariCP</artifactId>
        <version>5.0.0</version>
    </dependency>
    // ...
</dependencies>
```



2.. 두번재로는 직접 Jar 파일을 다운받아 프로젝트의 Library에 넣어주는 것이다. 의존성 관리를 자동으로 해주는 빌드 도구 대신해서, 내가 직접 의존성 주입을 해준다고 생각하면 된다. 의존성 추가는 다음과 같은 step으로 진행할 수 있다.

1. Jar 파일을 다운받는다. Jar 파일은 의존maven 중앙 저장소(https://mvnrepository.com/) 혹은 driver의 공식 홈페이지에서 다운받을 수 있다. 
2. 프로젝트 폴더에 lib 폴더를 생성해준다. (이름은 아무거나 상관 없다)
3. 다운받은 Jar 파일을 lib 폴더에 넣어둔다.
4. 프로젝트를 우클릭해서 **Java Build Path**를 클릭한 다음, **Libraries** tab을 눌러준다.
5. 팝업창 우측의 **Add JARs** 버튼을 누른 후, lib에 넣어둔 Jar 파일을 찾아 추가해준다. 그리고 파업창 우측 하단의 Apply를 누른다.







## Prepared Statement

https://www.geeksforgeeks.org/how-to-use-preparedstatement-in-java/



"pre-compiled" typically refers to the process of preparing a SQL statement for execution by the database engine before actually executing it with specific parameter values.



When you use a pre-compiled SQL statement, the database engine compiles the SQL statement into an optimized execution plan, which is stored in memory. This compilation step happens once, typically when the statement is first executed, and the compiled execution plan is then reused for subsequent executions of the same statement with different parameter values.

=> improved performance



When a database receives a query, it needs to determine the most effective way to execute that query based on various factors such as the structure of the database, the available indexes, the statistics of the data, and the query itself. The database engine evaluates different options for executing the query and selects the one that it believes will result in the fastest and most efficient execution.

The optimized execution plan typically includes information such as the order of table access, the use of indexes, the type of join operations, the use of filtering and aggregation operations, and other optimizations that are specific to the query and the database engine. 







Using these standard interfaces and classes, programmers can write applications that connect to databases, send queries written in structured query language (SQL), and process the results.







## 출처

 https://docs.oracle.com/javase/8/docs/technotes/guides/jdbc/























