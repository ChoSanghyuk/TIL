



### Defi

- 슬리피지

  - 주문이 요청 가격과 다른 가격으로 개설 

  - ex. 시장가 주문이 요청된 시점과 주문이 거래소에서 실행된 시점이 다르면 **매수호가/매도호가**가 변경되면서 슬리피지가 발생
- 유니스왑

  - 이더리움 블록체인에서 운영되는 탈중앙 거래소(DEX) 프로토콜로 탈중앙화된 가격 결정 메커니즘을 제공
  - A/B 유동성 풀에서 A,B가 차지하는 비중을 x, y라 할 때 `x*y=k`에서 k 값은 항상 일정하게 유지
  - 선형적으로 확장되지 않고, 더 큰 주문일수록 기하급수적으로 비싸져 더 큰 슬리피지 발생
- 아비트라지 : 무위험 차익 거래
- PGA (Priority Gas Auction)

  - 블록 스페이스 경매

  - **블록에 포함되기 위해 경쟁적으로 가스 가격(gas price)을 올리는 현상**
- 프론트러닝(Front-Running)

  - 수익성 높은 트랜잭션(예: 아비트라지)이 멤풀에 포착될 경우 동일한 트랜잭션을 생성한 채 가스비만 더 높게 제출하여 기회를 가로채는 행위
  - MEV(Miner Extractable Value) 봇들이 이를 수행
- 백러닝(Back-Running)

  - 프론트러닝과 반대로 타겟 트랜잭션 직후에 주문을 넣어 수익을 창출하는 행위
  - ex) 거래 규모가 큰 트랜잭션에 의해 일시적으로 높은 슬리피지가 발생하면 MEV 봇이 그 즉시 반대 주문을 넣어 시세 차익을 챙김
- 샌드위치 공격(Sandwich Attack)

  - 샌드위치 공격은 프론트러닝과 백러닝을 동시에 수행하는 MEV 공격 유형으로 성공했을 경우 두 차례에 결처 수익 발생
  - ex. MEV봇이 유니스왑에서 알트코인A를 대량 구매하는 주문을 포착하면 곧바로 동일한 트랜잭션을 생성하여 주문자를 프론트러닝한다. 이후 기존 주문자가 더 높은 가격에 A를 구매하면 즉시 구매하였던 토큰을 매도하여 시세 차익 챙김
- staking
  - leasing your crypto to the blockchain
  - involves locking up your crypto for a certain period of time to generate passive income
  - pledging your crypto to support the blockchain network
    - validators are chosen based on their stake to create new blocks and validate transactions. By leasing your crypto, you support these validators, who rely on staked assets to maintain network performance
- lending
  -  leasing your crypto to a borrower
  - pledging your crypto to a certain platform to earn more crypto but with three key differences.
    1. how the crypto is used
       - The platform charges those borrowers interest and splits the earnings with you
    2. let you withdraw your earnings anytime you lik
    3. U.S. regulators perceive them. 
       - They don't seem to view staking as a big threat, but they hate crypto lending.
- Lido
  - 탈중앙화 staking 서비스
  - 이더리움 검증인 자격 기준 : 32ETH
  - 진입장벽은 낮추기 위해 가능한 만큼만 Lido에 스테이킹하면 토큰으로 자격 지분 증정 및 지분에 따른 수익 분배



### 통신

- layerzero

  - not a blockchain or ledger. It is a **messaging protocol**.

  - a communication layer — that enables **smart contracts on different blockchains** to send messages to each other.

  - Internet for blockchains
- SATP

  - 개요
    - Secure Asset Transfer Protocol
    - 이기종 블록체인 간의 자산 이전을 안전하게 수행하기 위한 표준 프로토콜
    - 블록체인 간 자산 이전 시 필요한 **상호 인증**, **합의 상태 확인**, **전송 실패 복구 처리** 등을 정의
  - 특징
    - **중립적 구조**: 특정 체인에 종속되지 않고, 여러 구현체에 적용 가능.
    - **안정성 강화**: 두 체인 모두에서 전송 상태를 확인하고 확정 처리하여 자산 손실 방지.
  - 단계
    1. Initialization (초기화)
    2. Lock (자산 잠금)
    3. Verification (검증)
    4. Transfer/Unlock (이전 또는 해제)
    5. Acknowledgment (승인 확인)
    6. Completion or Rollback (완료 또는 롤백)
- HTLC (Hashed Timelock Contract)

  - 개요

    - **양방향 블록체인 간 안전한 자산 교환**을 위한 **스마트 계약 구조**로 **해시 잠금(Hashed Lock)**과 **시간 제한(Time Lock)**을 조합하여, **조건부 지불**을 구현
    - **SATP의 구현 방식 중 하나**

  - 특징

    - 암호화폐의 결제 기술 중 하나로 계약을 일정 시간까지로 제한한 타임락(Timelock)과 일정한 해시값이 제시돼야 계약이 성사되는 해시락(hashlock)이 결합된 형태

    - 수취인은 다음 두 가지를 수행해야 fund에 접근 가능 (**Lock → Verify → Unlock 구조를 실현**)

      1. enter the correct passphrase

      2. claim payment within a specific timeframe

  | **항목**           | **SATP**                                                     | **HTLC**                                            | **LayerZero**                                               |
  | ------------------ | ------------------------------------------------------------ | --------------------------------------------------- | ----------------------------------------------------------- |
  | **정의**           | 블록체인 간 자산 이전을 위한 **표준 프로토콜 (IEEE P2140.1)** | 조건부 지불을 위한 **스마트 계약 구조 (기술 기법)** | 체인 간 메시지 전송을 위한 **인터체인 메시징 프로토콜**     |
  | **역할**           | 프로토콜 설계 표준 (상위 프레임워크)                         | SATP에서 사용 가능한 **실제 구현 방법 중 하나**     | SATP와는 별개로 **상용화된 크로스체인 메시징/통신 솔루션**  |
  | **자산 이전 방식** | Lock → Verify → Unlock / Mint                                | 해시 + 타임락 기반 자산 이전                        | 메시지 전송 후 수신 체인에서 실행 (send + receive)          |
  | **보안 모델**      | 중재자 / 증명 기반 / 서명 검증 등 다양하게 설정 가능         | Preimage + Timeout 기반 **조건부 보안**             | Oracle + Relayer (ULN: Ultra Light Node) 사용               |
  | **지원 체인**      | 체인 불문 (이기종 체인 포함)                                 | 주로 UTXO ↔ EVM 등 양방향 대응                      | EVM 위주 + 일부 비EVM 체인도 지원                           |
  | **활용 예시**      | 정부/기관 간 CBDC 송금, 금융기관 간 Cross-chain 자산 이전    | 비신뢰 환경의 P2P 토큰 스왑                         | DeFi 간 메시지 기반 자산 이동 (ex. Stargate, SushiXSwap 등) |
  | **표준화 상태**    | IEEE 표준화 진행 중                                          | 기술적으로 일반화됨                                 | 상용 제품 (LayerZero Labs, 자체 토큰 ZRO 발행)              |

- CCTP (Cross-Chain Transfer Protocol)

  - 개요

    - coinbase사에서 만든 여러 체인간 USDC 전송 프로토콜
    - 소각-발행 방식으로 동작

    :bulb: **공식적으로 SATP를 따르고 있진 않지만**, **SATP의 개념적 모델에 부합**

  - [비교] 브릿지

    - 대표 예시
      - 웜홀(**Wormhole**)
    - 동작 방식
      - 보통 웹 애플리케이션으로 제작되어 사용자가 직접 서명
      - 잠금-발행 방식으로 동작
      - 주로 브릿지를 만든 업체 또는 가디언들에 의해 관리

| **항목**      | **브릿지 발행 USDC.e**        | **CCTP 네이티브 USDC**       |
| ------------- | ----------------------------- | ---------------------------- |
| 발행 주체     | 브릿지 운영사 / 가디언        | Circle                       |
| 발행 방식     | lock + mint                   | burn + mint                  |
| 유동성 통합성 | 체인 별 분리                  | 1:1 native, 자산 통합        |
| 신뢰 대상     | 브릿지 운영자                 | Circle, 중앙화된 옵저버      |
| UX            | UI 중심, 다소 복잡            | API 중심, 단순·개발자 친화적 |
| 수수료 구조   | LP스왑, 브릿지 운영 비용 발생 | 온체인 가스비만 발생         |

- 웜홀

  - 개요

     - 대표적인 크로스체인 브릿지
     - **“Guardian Network”** 라는 것을 운영함.

  - 가디언

     - 크로스체인 브릿지에서 트랜잭션을 감시하고 검증하며, 새로운 체인에서 토큰을 발행하거나 해제하는 역할을 맡은 신뢰 주체 (노드)

     - **브릿지 시스템에서 두 체인 간의 상태 변화(예: 토큰 락업)를 감지하고, 그에 따라 반대편 체인에서 mint 또는 unlock을 수행하는 역할**

  - Guardian Network

    - 이 네트워크는 19개의 독립된 가디언 노드로 구성되어 있음.
    - 이들은 다음과 같은 일을 수행함:
    
      1. 체인 A에서 USDC가 락업되었는지 감시
      2. 이를 관찰 후 서명된 메시지(VAA: Verifiable Action Approval)를 생성
    
       3. 체인 B에서 이 메시지를 기반으로 USDC를 mint


  - 보안 취약점
    - Guardian Network 서명에 취얌점이 발견되어 수십억 탈취 사건 존재



### 지갑

- 수탑형 vs 비수탑형
  - 수탑형 - 지갑에 대한 관리를 제 3자에게 위임 (ex. 거래소)
  - 비수탑형 - 개인키를 본인이 직접 관리
- 핫 vs 콜드
  - 핫 월렛 : 인터넷 연결이 되어 온라인으로 암호화폐를 주고 받을 수 있는 지갑 (ex. 메타마스트)
  - 콜드 월렛 : 인터넷이 차단된 하드웨어 장치에 개인키를 보관 (ex. 디세트, 나노렛저)





### 네트워크

- 솔라나

  - Pos + PoH 합의 알고리즘으로 이더리움보다 더 빠른 처리 속도

    ![image-20241110191630437](/Users/84455/workspace/TIL/blockchain/assets/image-20241110191630437.png)

  - based on the **Berkeley Packet Filter (BPF)**, an efficient virtual machine optimized for high-performance and **parallel execution**.

  - BPF is compatible with Rust and C

  :bulb: 하지만 이미 이더리움이 Defi와 NFT등의 영역에서 압도적인 시장 점유자

- tron
  - TRON is a public blockchain dedicated to providing the underlying infrastructure that enables developers to **create smart contracts and decentralized applications**, freely publish, own, and store data & other content.
  - TRON deploys a **Delegated Proof-of-Stake (DPoS) consensus mechanism** to avoid the issue of low transaction throughput times and high transaction fees amongst Proof-of-Work (PoW) public blockchains (e.g., Bitcoin).
  - 거래소간 송금 시 사용됨
  - why is it fast
    - DPoS
      - **27 Super Representatives (SRs)** are elected
      - prioritizes **speed over decentralization**.
    - TVM
      - Tron Virtual Machine (TVM) is optimized for speed.

- L2 (Layer 2)

  - Base
    - Coinbase가 개발한 L2 블록체인 (Optimism 기반).
    - Ethereum과 호환되며, Coinbase 생태계와 통합.
  - Polygon
      - Ethereum의 확장 솔루션을 제공하는 프로젝트.
      - PoS 체인, zkEVM, CDK 등 다양한 L2 기술 보유.
  - Arbitrum
      - (Optimistic Rollup 방식).
      - 빠르고 저렴한 트랜잭션, Ethereum 메인넷 보안 유지.
  - Blast
  
  
    - Scroll
  


- BNB Chain

  - **BNB Beacon Chain(관리 및 거버넌스)** + **BNB Smart Chain(BSC)**로 구성
    - **BSC (Binance Smart Chain)**
      - 바이낸스에서 개발한 EVM 호환 블록체인.
      - 빠른 트랜잭션 처리와 저렴한 수수료가 장점.

  - 바이낸스 생태계 전반을 포괄하며, DeFi, GameFi, SocialFi 등 다양한 프로젝트 포함

- 카이아

  - 카카오 + 라인 통합 네트워크
  - SNS 통합된 dApp 서비스 제공



### 주요 표준

- **EIP-1559**

  - 이더리움의 **가스 수수료 구조를 근본적으로 개편**한 제안

  | **항목**           | **EIP-1559 이전**       | **EIP-1559 이후**            |
  | ------------------ | ----------------------- | ---------------------------- |
  | 수수료 결정 방식   | **경매식(PGA)**         | **기본 수수료 + 팁**         |
  | 수수료 예측 가능성 | 낮음                    | 높음                         |
  | 채굴자 수익        | 사용자가 낸 전체 가스비 | 팁(Tip)만 가져감             |
  | ETH 공급량         | 일정                    | **일부 수수료 소각(Burn)**됨 |

- ERC1967 - Standard Proxy Storage Slots

:bulb: EIP vs ERC

- EIP (Ethereum Improvement Proposal): 이더리움의 전체적인 기술 제안서
- ERC (Ethereum Request for Comments) : EIP 중에서 스마트컨트랙트 인터페이스로 정리된 것




## DEX



### Bin steps

- **"Bin"**: A price range or bucket where liquidity is deposited.
- **"Step"**: The difference in price between two adjacent bins.
- **"10 bps"**: This means **10 bps(basis points)**, or **0.10%**.













