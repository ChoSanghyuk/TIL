# Rust Intermediate Concept



## Idiomatic Rust



### rustfmt

- rust에 맞는 포맷으로 code를 리팩토링 해줌

- 설치
  - `rustup component add rustfmt`
- 사용
  - `cargo fmt`
- Customize
  - root 폴더에 `.rustfmt.toml` 파일을 둠으로써, 커스터마이징 가능



### clippy

- 사용

  - `cargo clippy`

- 용도

  - 실제로 코드를 컴파일 => 450여 가지의 문제들에 대해서 체크해줌

- 대표 영역

  1. Style

     - rust convention에 맞는 방식으로 유도

  2. Correctness

     - outright wrong or very useless 한 코드에 대한 warning

  3. Complexity

     - 복잡한 코드를 간결하게 변경할 수 있도록 권고

     - certain / guess 하는 경우로 나누어짐

       :bulb: clippy의 경고를 무시하기 위해서는 `#[allow(clippy::경고이름)]` attribute를 소스에 추가

  4. Performance

:bulb: `clippy lints`를 검색해서 문서를 본다면, rust를 더 잘 작성하기 위한 tip들을 얻을 수 있음



###  :bulb:attribute

- 구조
  - `#[attribute]`
- 종류
  - `outer attribute`
    - it applies to the next item that it is outside of
    - 해당 attribute 바로 다음 소스에 대해서만 적용



## Documentation



### documentation

- 실행
  - `cargo doc`
  - `cargo doc --no-deps --open`
    - `--no-deps` : generate your library's documentation without generating all the documentation for all your dependencies
    - `--open` : automatically opens the index page of the generated documentation in your default browser
      - or `target/doc/packagename/index.html` 을 직접 열어야 함
- 대상
  - default로는 public 요소만 생성
  - private 요소도 생성하기 위해서는 별도 명령어 필요
- Tip
  - 항상 description을 최상단에 작성한 이후에 header들과 section 작성
  - 주로 implementation block에는 작성하지 X (주로 변수 작성 시에 대부분 내용이 들어감)



### Outer Documentation Comments

- 작성

  1. 라인

  ```rust
  /// Number of pieces in the puzzle
  ///
  /// #History
  ///
  /// - 블라블라
  pub const PUZZLE_PIECES:u32 = 42;
  ```

  2. 블록 

  ```rust
  /**
  Number of pieces in the puzzle
  
  #History
  ~~
  
  - Clickable link : [`PUZZLE_PIECES`]
  - 블라블라
  **/
  pub const PUZZLE_PIECES:u32 = 42;
  ```

- markdown 어법 사용

  - 예외

    - intra-doc links 

      - hyperlink to other parts of the documentation

      - [`PUZZLE_PIECES`] (`은 optional)

      - `[다른 문구](PUZZLE_PIECES)` 로도 가능

        :bulb: 만약 link 대상이 scope 안에 있지 않다면, absolute path로 지정 O

- 



### Inner Documentation Comments

- 용도
  - document main library, module that you're inside of

- 작성
  - 라인 : `//!`
  - 블록 : `/*!   !*/`







































