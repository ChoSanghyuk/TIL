# 프로세스 모델링 실습



## 업무기능 분해도 및 업무 흐름도



### 업무기능 분해도 주의점

- 수작업
  - 시스템에 영향을 미치지 없는(**시스템상 바뀌는 것이 없는**)  작업
  - ex) 전산 처리 요청이 없거나, 태깅이 없는 경우

- 프로세스의 이름은 명확하게 작성 

  - 여러 행동이 동시에 나오는 경우, 하나로 아울러서 작성한다.
  - ex) 놀이공원리자는 놀이공원이용자의 티켓을 스캔하여 해당 놀이기와 예약 시간이 맞는지 확인하여 예약대기 줄에 서도록 안내한다.  => 놀이기구사전예약확인

- 작성 Tip :bulb: 업무기능 분해도는 **누가** **무엇**을 하느냐에 초점을 맞춤

  - ex1) 현장에서 구매한 티켓은 매표소에서만 취소 가능하다 

    ​	=> **매표소** do **발권취소**

  - ex2) 놀이공원이용자가 매표소직원에게 티켓 구매를 요청하면, 매표소 직원이 발권한다.

    ​	=> **놀이공원이용자** do **티켓 구매 요청**. **매표소 직원** do  **발권**



### 업무흐름도 주의점

- 경우에 따라서 start가 하나 아닐 수 있음



## 모듈 및 오퍼레이션 정의



### 비지니스 모듈 오퍼레이션 도출

1. SQL 사용 여부
   - 오퍼레이션의 구분은 SQL문 사용 여부로 판단해도 괜찮을듯
   - ex) 같은 콤보박스로 구분되지만, 할인 목록은 할인 목록 조회로 오퍼레이션 구분. 날짜 선택 및 매수 선택은 X

2. 화면(특히 팝업 화면)에서의 조회
3. 버튼 및 하이퍼링크와 같은 클릭 후 이벤트 발생 여부





### 데이터 모듈 오퍼레이션 도출

- 비지니스 모듈의 오퍼레이션과 데이터 모듈의 오퍼레이션은 1:1 관계가 아님
- 비지니스 모듈의 오퍼레이션을 수행하기 위한 논리 ERD의 Entity 단위의 수행으로 쪼깸
  - Biz : Data = 1 : N
    - 티켓예약B.할인적용목록조회
      - 회원D.회원등할인율조회
      - 사전예약할인율D.사전예약할인율조회
      - 이벤트D.이벤할인목록조회
  - Biz : Data = N: 1
    - 티켓예약B.티켓예약취소 , 티켓예약B.티켓예약전체취소 : 티켓D.티켓예약상태수정

- 삭제는 최대한 지양 (Entity내의 만료 및 상태코드가 없는 경우에만 고려)
- 오퍼레이션 이름은 Entity 등록 / Entity 조회 / Entitny 필드 수정



### 공통 모듈

- 비지니스 모듈의 재발송 버튼 + 배치 모듈의 예약티켓 발송 => 두 개 공통으로 SMS 발송
- SMS발송C.SMS발송 BY 티켓예약B.티켓재발송, 예약티켓발송J.예약티켓발송



### 배치 모듈

- 맨 처음 전반적인 설명글도 중요.

- 모바일 티켓은 예약 후 1시간 이내에 발송 => 배치 유추 
- 예약티켓발송J.예약티켓발송 BY scheduler



## API 설계



### 01. 데이터셋 정의

- GET과 POST에 있어서 어떤 필드들이 필요할지 고민
  - GET
    - 화면 구성에 어떤 필드 정보를 받아와야 하는지 고민
  - POST 
    - POST 수행에 어떤 정보들만 가면, 기능이 완수 될 수 있는지 고민.
    - 보통, PK 값 + 사용자가 조작한 값
- 같은 ROW에 있어도, 놀이기구의 필드인지, 예약의 필드인지, 혹은 사용자가 등록하는 정보용인지 구분이 필요함
- 도출 TIP
  - API는 논리 ERD 모델링과 크게 관계성 X. BUT, 해당 테이블의 PK 정보는 필요함
  - 화면상 필드가 `/`로 분리되어 있을 때에는 별도의 필드로 분리 필요
    - ex) `예약배정/총배정` 으로 되어 있다면, 필드는 `예약배정`과 `총배정` 두 개의 필드로 분리
  - 값이 `,` 또는 list 조회 버튼 형식이라면, 필드명 뒤에 `[]` 표시 필요
    - ex) 기념사진[]



### 02. API 정의

- API를 수행함에 있어서, 도출된 데이터셋을 가져오기 위해서 어떤 값들이 필요한지 고민
- 작성
  - Requset Data : GET, POST 작업에 어떤 값들이 필요한지
  - Response Data
    - GET : 어떤 데이터셋이 호출되는지
    - POST : 공란



### 03. POST/ GET API

- Request / Response

  - Method : GET, POST 꼭 작성
  - **02.API 정의** 에서 정의한 Requset Data와 Response Data 활용해서 작성해야함.
  - 자료타입 `Object`로 여러 필드들을 묶어서 작성할 수 있음을 유의

  - 예약일자여도 `String` 타입으로 지정. (Data라고 작성해서 틀린건지 Date도 안되는 것인지 의문)

- Request Body / Response Body

  - 키값은 보통  String 이기 때문에, `" "` 처리 꼭 해줘
  - Map과 Array 양식만 잘 지켜서 작성

  ```
  "탑승자정보" : [
  	{
  		"가족등록정보" : ... ,
  		"이름" : ...
  	} , 
  	{
  		"가족등록정보" : ... ,
  		"이름" : ...
  	}
  ]
  ```





## 테스트 설계



### 결정 테이블 

- 작성 가이드
  - 개요에 기술되어 있는 **모든 조건**을 Condition 부분에 나열
  - 개요에 기술되어 있는 **모든 기대결과**를 Action 부분에 기술
  - 테스트 조건으로 가능한 논리적인 조합을 구성
    - 논리 조합에 참여 시, Y or N
    - 논리 조합 비참여 시, N/A
  - 각 테스트 조건의 조합의 기대결과에 해당하는 Action에 Y 기술
    - Action은 다수 선택 O
    - 기대결과에 해당하지 않는 Action은 비워둠
- 작성 Tip
  - 문제에서 [기대결과] 부분을 통해서도 조건 도출 필요



### 테스트케이스

- 작성 가이드
  - 결정 테이블의 각 Condition을 결정짓는 항목들을 입력값 조건으로 도출한다.
  - 테스트 데이터를 작성한다.
  - 테스트 데이터를 입력했을 때 기대결과를 기술한다.
- 작성 Tip
  - 테스트 케이스의 수(row)는 결정 테이블에서 Case의 수와 일치 ( != Condition의 수)
  - 기대결과는 결정 테이블에서 해당 Case의 Y로된 모든 Action 기입



### Work Flow

- 서비스 개요를 읽고서, 조건 분기와 분기별 결과를 토대로 작성
- 마름모 안에서 조건 입력할 때, 일치 여부 판단은 `A = B`로 표기
- 다중 조건은 `and`, `or` 표기



### 구분커버리지 기반 테스트 케이스

- 작성 방법
  - 처리 경로
    - Work Flow의 A~F를 이용하여 경로 작성
    - ex) A-B-C, B-C-D
  - 입력데이터
    - **입력데이터로 사용되지 않는 항목이 있는 경우 N/A로 작성**
  - 기대결과
    - 기대결과 대신 계산식으로 작성하시오
    - ex) cns포인트 = 10000*0.1

- 입력데이터
  - Work Flow의 조건 분기(마름모)에 나오는 조건들에 대한 값 입력
    - ex) 총주문금액 >= 10000 and 주문 메뉴 개수 >= 5 라는 조건 존재 시, 필드로 총주문금액과 주문 메뉴 도출 O
  - 해당 경로를 탈 수 있는 실제 데이터 값을 입력함
- 기대 결과
  - 입력데이터의 실제 값을 대입했을 때 나오는 실제 계산식으로 작성
