# 데이터 모델링 실습



## 정규화



### 정규화

- 기본 방법

  - 정규화가 진행되지 않았을 때의 ERD (하나의 통으로 된) 그려보고, 점차 1~3차 정규화 진행

- 정규화전 ERD

  - 실습에서의, 하나의 학생번호당 활동들이 세부 row로 쪼개져서 있을 경우, 해당 컬럼들을 다가 속성으로 인식하고 모델링

    => main row의 PK를 정규화 전 ERD의 PK로 인식

- 1차 정규화

  - 제거 목록
    - 다가 속성
      - 같은 종류의 값을 여러 개 가지는 속성
      - 하나의 속성 안에 `A , B, C`와 같은 여러 값이 들어있음
      - ex) 활동 이름, 활동 번호, 활동 일자
    - 복합 속성
      - 하나의 속성이 여러 개의 속성으로 분리될 수 있는 속성
      - 원칙적으로는 하나의 의미만 나타내는 속성들로 분해 BUT!  무조건 분해가 아닌, 데이터 관리 수준(요건)에 따라 분리
      - ex) 주소 => 시, 구, 동으로 분리할 경우, 분해와 조합에 낭비
    - 중복 속성
      - 한 릴레이션에 반복 형태의 속성이 있어서는 안 된다
      - ex) 교환/졸업/튜터링 신청활동 및 이름

  - PK 잡는법
    - 다가/복합/중복 속성 제거로 엔티티가 분리되었으면, 보통의 경우 기존 엔티티에 의존하게 됨 (부모-자식 관계)
    - 분리된 엔티티의 의미와 유일성을 고려하여 PK 작성
    - :bulb: "전공별로 적합잔 조건에 맞는 활동을 증빙하여 원하는 프로그램을 신청" 이라는 문구로 전공-활동의 관계 잡을 순 X. 단순히 증빙할 수 있다는 얘기

- 2차 정규화

  - 엔터티 식별자(PK)에서 부분 함수 종속 제거

- 3차 정규화

  - 일반 속성간 부분 함수 종속 제거



## 논리 데이터 모델링



### Tip. 문제 요구사항을 보고 디테일 도출

- "카테고리화하여 코드로 관리하며, 상위부품종류코드가 무엇인지도 관리"

  => 부품종류라는 별도의 엔터티가 존재하며, 부품코드를 통한 자기 참조 관계가 존재함

- "주문고객 및 배송지주소가 동일한 경우 여러 주문이 한 번에 배송되기도 한다. 단, 하나의 주문이 여러 번에 나뉘어서 배송되는 경우는 없다."

  => 배송과 주문은 최소 1:다 관계. 단, 배송없는 주문이 존재할 수 있기에 0도 포함시킴



### 배타적 서브타입 / 포괄적 서브타입

- 구분
  - 배타적 서브타입
    - 서브타입간 교집합이 없어, 서브타입들의 합집합 = 부모타입
  - 포괄적 서브타입
    - 서브타입간 교집합이 있어, 서브타입들의 합집합 != 부모타입

- 예시

  - "일반회원은 자유이용회원으로 결재하여 회원유형이 변경되는 경우에도 일반 회원의 유효한 헤택은 그대로 유지"

    => 자유이용회원이면서 일반회원 가능 => 포괄적 서브타입

    :bulb: 따라서, 자유이용회원 내에서 가입혜택사용여부 필드도 필요 X



## 물리 데이터 모델링



### 물리 데이터 모델링에서의 서브타입

- 물리테이블로 전환 시, Super/Sub 타입은 실제 테이블간의 릴레이션으로 표시된다.



### 물리 모델링 방법

- TIP

  - 기존의 분리되어 있던 모델링을 어떻게 합칠지만 생각 (더 새롭게 분리할 필요 X)

  - 기존 분리되어 있던 모델링에서 요구사항에 따라 합치지 않을 대상들을 선별

- 실습 답안 설명

  - 고객회원과 직원은 별개 URL로 접속하여 별개의 기능을 수행하며 회원용 서비스와 별개로 직원용 기능은 안정적으로 운영 되어야 하므로 고객회원과 직원 테이블을 독립적으로 구성하는 것이 바람직.
  - 회원 기본정보와 회원유형별 상세정보는 별도 메뉴로 구성하여 독립적으로 조회되고있고, 서비스는 로그인 시 고랙회원유형코드 만으로도 회원유형별 서비스 제공이 가능하여 고객회원정보과 각 고객회원유형별 정보가 독립적으로 활용되고 있으므로 각각의 엔터티를 그대로 테이블로 분리하는 것이 좀더 적합
  - 일반회원은 별도 속성 없으므로 고객회원 내용만으로도 표현되므로 테이블을 분리하지 않아도 된다
  - 직원은 정규직, 임시직으로 구분이 되나 시나리오 상 월급 정산, 대시보드 및 주요 사내시스템 연계 시 Super/Sub Type 엔터티의 속성들이 함께 활용되고 있어 직원유형별 테이블로 분리하지 않고 통합하여 관리하는 것이 좀더 바람직

















