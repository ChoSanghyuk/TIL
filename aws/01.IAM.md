# Identity and Access Management



## Introduction



### IAM 요소

- Root Account 
  - created by default, shouldn’t be used or shared
- Users 
  - people within your organization. 
  - can be grouped or not
  - can belong to multiple groups
- Groups 
  - only contain users



### IAM 역할 : Permission

- Users or Groups can be assigned JSON called policies which define permission

- Least Privilege Principle

  - 필요한 최소한의 권한만 부여

  



## IAM Policies



### Inheritance

- Group
  - Group의 Policies 적용받음
- User
  - Inline Policy 적용 ㅇ



### Policies Structure

- Version
- Id (optional)
- Statement

### Statement Structure

- Sid (optional)
- Effect
  - whether the statement allows or denies access
  - Allow, Deny
- Principal
  - account/user/role to which this policy applied to
- Actions
  - list of actions this policy allows or denies
- Resource
  - list of resources to which the actions applied to
- Condition (optional)
  - conditions for when this policy is in effect



## IAM Security



### Password Policy

- Set a minimum password length
- Require specific character types
- Allow all IAM users to change their own password
- Require users to change their password after some time
- prevent password re-use



### MFA

- password you know + security device you own

  => 비밀번호가 탈취되어도 계정이 해킹당하지 않음

- 종류

  - Virtual MFA device 
    - Google Authenticator
    - Authy
  - Universal 2nd Factor
    - YubiKey 
  - Hardware Key Fob MFA Device
  - Hardware Key Fob MFA Device for AWS GovCloud



### Access AWS

- AWS Management Console
  - password + MFA
- AWS Command Line Interface (CLI)
  - access keys
- AWS Software Developer Kit (SDK)
  - access keys



## AWS CLI



### 설치

- aws cli download
- cmd 창에 `aws --version`으로 버전 및 설치 여부 확인



### CLI User Configure

1. user의 access key 받기
   - root 계정이 아닌, user 계정에서 access key 받음
2. cli configure
   - cmd 창에 `aws configure`
   - id, key, 지역, format(생략o) 설정. 
3. 이후 해당 user에게 주어진 권한 작업 수행 o
   - ex) `aws iam list-users`



### AWS CloudShell

- Aws 자체 제공 cmd 창
- 개인 클라우드 공간에 파일 생성, 업로드, 다운로드 o
- 특정 지역 기점으로만 작동 (ex. tokyo)





## IAM Roles



### IAM Roles for Services

- 몇몇 AWS service는 사용자를 대신해서 수행함

  => 이 경우, AWS service에 IAM Roles를 부여함으로써 permission 제공

- Common roles

  - EC2 Instance Roles
  - Lambda Function Roles
  - Roles for CloudFormation





## IAM Security Tools



### IAM Security Tools

- IAM Credentials Report 

  - account-level
  - lists all your account's users and the status of their various credentials

- IAM Access Advisor

  - user-level

  - shows that service permissions granted to a user and when those services were last accessed

    =>  Least Privilege Principle 실천

